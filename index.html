<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dividends</title>
    <meta name="author" content="Anton Pugach">
    <meta name="description" content="Responsive D3.JS chart component">
    <meta name="keywords" content="d3.js, chart, responive">
    <style type="text/css">
        body {
            font-family: "AvenirNext";
            font-size: 13px;
            background-color: #ffffff;
        }
        
        .axis--x, .axis--y {
            color: #c8c8c8;
        }
        .axis--x path {
            display: none;
        }

        .axis--y path {
            display: none;
        }

        .title {
            font-size: 18px
        }


    </style>
</head>

<body>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script type="text/javascript">
        const dataSetNewPort = [
            { year: 2014, value: 1.4},
            { year: 2015, value: 2.4},
            { year: 2016, value: 3.8}
        ];

        const dataSetExistingPort = [
            { year: 2014, value: 2.1},
            { year: 2015, value: 2.9},
            { year: 2016, value: null },
            { year: 2017, value: 1.1},
            { year: 2018, value: 2.3}
        ];

        function years(dataSet) {
            return dataSet.reduce((accumulator, currentData) => { return accumulator.concat(currentData.year) },[])
        }

        function values(dataSet) {
            return dataSet.reduce((accumulator, currentData) => { return accumulator.concat(currentData.value) },[])
        }

        const margin = { top: 32, right: 24, bottom: 33, left: 24 },
              width = 698 - margin.left - margin.right,
              height = 423 - margin.top - margin.bottom;
        
        const svg = d3.select('body').append('svg')
                                     .attr('width', width + margin.left + margin.right)
                                     .attr('height', height + margin.top + margin.bottom)
                                     .append('g')
                                        .attr('transform', `translate(${margin.left},${margin.top})`)
        // Add title
        const title = svg.append('text')
                         .classed('title', true)
                         .attr('x', 0)
                         .attr('y', 0)
                         .text('Dividends')

        // Add horizontal break line
        const brLine = svg.append('line')
                          .attr('x1', 0)
                          .attr('y1', 8)
                          .attr('x2', 650)
                          .attr('y2', 8)
                          .attr('stroke-width', 1)
                          .attr('stroke', '#dcdcdc')
        
        // X and Y scales
        const x = d3.scaleBand().rangeRound([0, width]).padding(0.5),
              y = d3.scaleLinear().rangeRound([height, 0]);

        // Set domain for X and Y
        x.domain(years(dataSetExistingPort));
        y.domain([0, Math.round(d3.max(values(dataSetNewPort)))]); 
        
        // Create X and Y axis
        const xAxis = d3.axisBottom(x);
        const yAxis = d3.axisLeft(y).ticks(4).tickFormat(d => d + '%');

        const g = svg.append('g')
                     .attr('transform', `translate(${margin.left},${margin.top})`);
        
        // Add axes
        // x-axis
        g.append('g')
            .attr('class', 'axis axis--x')
            .attr('transform', `translate(${-margin.left + -margin.right},${height - margin.top - margin.bottom})`)
            .call(xAxis)

        // y-axis
        g.append('g')
            .attr('class', 'axis axis--y')
            .call(yAxis)       

        // Add data circles
        // existing portfolio
        g.selectAll('.existing.dot')
            .data(dataSetExistingPort)
            .enter()
            .append('circle')
            .attr('class', 'existing')
            .attr('cx', (d) => { return x(d.year); })
            .attr('cy', (d) => { return y(d.value); })
            .attr('r', 7)
            .style('fill', '#c6c9d9');
        
        // new portfolio
        g.selectAll('.existing.dot')
            .data(dataSetNewPort)
            .enter()
            .append('circle')
            .attr('class', 'new')
            .attr('cx', (d) => { return x(d.year); })
            .attr('cy', (d) => { return y(d.value); })
            .attr('r', 7)
            .style('fill', '#041370');

        function render() {

        }
        window.onload = render;
    </script>
</body>

</html>